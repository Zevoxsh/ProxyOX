global:
  log-level: info
  use-uvloop: false
  timeout: 300
  max-connections: 100

frontends:
  # Port 80 - HTTP proxy vers backend HTTPS
  - name: http-redirect
    bind: 0.0.0.0:80
    mode: http  # ← Mode HTTP au lieu de TCP
    default_backend: https-server  # ← Nouveau backend HTTPS

  # Port 443 - HTTP proxy vers backend HTTPS
  - name: tcp-fe
    bind: 0.0.0.0:443
    mode: http  # ← Mode HTTP au lieu de TCP
    default_backend: https-server  # ← Nouveau backend HTTPS
  
  - name: udp-fe
    bind: 127.0.0.1:9001
    mode: udp
    default_backend: udp-server

  - name: http-fe
    bind: 127.0.0.1:8081
    mode: http
    default_backend: http-server

backends:
  - name: https-server
    server: 82.64.136.176:443
    https: false  # ← Désactivé temporairement pour debug

  - name: tcp-server
    server: 82.64.136.176:443

  - name: udp-server
    server: 10.10.0.201:9443

  - name: http-server
    server: 10.10.0.200:8006

global:
  log-level: info
  use-uvloop: false
  timeout: 300
  max-connections: 100

frontends:
  - name: tcp-fe
    bind: 0.0.0.0:443
    mode: tcp
    default_backend: tcp-server
    # Mode flexible Cloudflare activé!
    # Le proxy accepte les connexions HTTPS (avec certificat auto-signé)
    # et transmet en HTTP simple vers le backend.
    # Parfait pour Cloudflare Flexible SSL:
    #   - Cloudflare <-> ProxyOX : HTTPS (certificat auto-signé OK car Cloudflare accepte)
    #   - ProxyOX <-> Backend : HTTP simple
    flexible: true
    # Optionnel : spécifier vos propres certificats
    # certfile: /path/to/cert.pem
    # keyfile: /path/to/key.pem
    # Si non spécifié, un certificat auto-signé sera généré automatiquement

  - name: udp-fe
    bind: 127.0.0.1:9001
    mode: udp
    default_backend: udp-server

  - name: http-fe
    bind: 127.0.0.1:8081
    mode: http
    default_backend: http-server

backends:
  - name: tcp-server
    server: 10.10.0.201:9443

  - name: udp-server
    server: 10.10.0.201:9443

  - name: http-server
    server: 10.10.0.200:8006

global:
  log-level: info
  use-uvloop: false
  timeout: 300
  max-connections: 100

frontends:
  # Port 80 - Reverse proxy HTTP avec routage par nom de domaine
  - name: http-reverse-proxy
    bind: 0.0.0.0:80
    mode: http
    domain_routes:
      - domain: appache.innovtech.local
        backend: websrv
      - domain: nc.innovtech.local
        backend: ncsrv-http
      - domain: wings.innovtech.local
        backend: wingssrv
      - domain: panel.innovtech.local
        backend: panelsrv-http
    # Backend par défaut si aucun domaine ne correspond
    default_backend: websrv

  # Port 443 - Reverse proxy HTTPS avec routage par nom de domaine (SNI)
  - name: https-reverse-proxy
    bind: 0.0.0.0:443
    mode: http
    domain_routes:
    default_backend: websrv

  # Port 8080 - TCP proxy direct vers wingssrv (accès direct si besoin)
  - name: wings-direct
    bind: 0.0.0.0:8080
    mode: tcp
    default_backend: wingssrv
    backend_ssl: false

  # Port 9191 - TCP proxy vers ncsrv
  - name: nc
    bind: 0.0.0.0:9191
    mode: tcp
    default_backend: ncsrv-http
    backend_ssl: false

  # Port 7171 - TCP proxy direct vers panelsrv (accès direct si besoin)
  - name: panel-direct
    bind: 0.0.0.0:7171
    mode: tcp
    default_backend: panelsrv-http
    backend_ssl: false

backends:
  # Backends HTTP (port 80)
  - name: websrv
    server: 192.168.100.206:80
    https: false

  - name: wingssrv
    server: 192.168.100.203:8080
    https: false

  # NextCloud - Si votre NC a une interface web HTTP
  - name: ncsrv-http
    server: 192.168.100.204:80
    https: false

  # Panel - Si votre panel a une interface web HTTP
  - name: panelsrv-http
    server: 192.168.100.203:80
    https: false